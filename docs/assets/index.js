import{d as P,c as N,o as h,a as f,n as L,b as S,t as p,u as r,e as D,f as _,r as $,w as F,g as u,h as g,i as E,j as z}from"./vendor.js";const I=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function o(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(i){if(i.ep)return;i.ep=!0;const s=o(i);fetch(i.href,s)}};I();var m=(e=>(e.SMALL="small",e.MEDIUM="medium",e.LARGE="large",e))(m||{}),C=(e=>(e.PRIMARY="primary",e.DEFAULT="default",e))(C||{});const O={key:1},v=P({props:{isCircle:{type:Boolean,default:!1},size:{default:m.MEDIUM},icon:null,caption:{default:""},type:{default:C.DEFAULT}},setup(e){const t=e,o=N(()=>({"base-button_circle":t.isCircle}));return(a,i)=>(h(),f("button",{type:"button",class:L(["base-button",`base-button_${e.size}`,`base-button_${e.type}`,r(o)])},[e.icon?(h(),f("i",{key:0,class:L(e.icon)},null,2)):S("",!0),e.caption?(h(),f("span",O,p(e.caption),1)):S("",!0)],2))}});var y=(e=>(e.BACKWARD="fas fa-backward",e.PLAY="fas fa-play",e.PAUSE="fas fa-pause",e.FORWARD="fas fa-forward",e))(y||{}),R=e=>{const a=Math.floor(e/3600),i=Math.floor((e-a*3600)/60),s=e-a*3600-i*60;let c="";const n=s<10?`0${s}`:`${s}`;if(!a)c=`${i}:${n}`;else{const l=i<10?`0${i}`:`${i}`;c=`${a}:${l}:${n}`}return c};const U=D("audioPlayer",{state:()=>({player:void 0,playlist:[],currentAudio:void 0,progress:0,isPlaying:!1}),getters:{indexCurrentAudio:e=>e.currentAudio?e.playlist.indexOf(e.currentAudio):0,duration:e=>{var t;return Math.trunc(((t=e.player)==null?void 0:t.duration)||0)},getFormattedProgress:e=>{var t;return e.currentAudio&&((t=e.player)==null?void 0:t.duration)?R(Math.floor(e.progress)):"--:--"},getFormattedDuration:e=>{var t;return(t=e.player)!=null&&t.duration?R(Math.floor(e.player.duration)):"--:--"}},actions:{setPlayer(e){this.player=e},setCurrentAudio(e){this.currentAudio=e,this.load()},async play(e){var t,o,a;this.currentAudio||this.setCurrentAudio(this.playlist.find(i=>i.id===e)),e!==((t=this.currentAudio)==null?void 0:t.id)&&(this.isPlaying=!1,this.setCurrentAudio(this.playlist.find(i=>i.id===e))),(o=this.player)!=null&&o.paused&&((a=this.player)==null||a.play().catch(i=>console.log(i))),this.isPlaying=!0},pause(){var e;(e=this.player)==null||e.pause(),this.isPlaying=!1},slideProgress(e){if(this.player){const t=Math.floor(this.duration*+e/100);this.player.currentTime=t,this.progress=t}},load(){this.player&&(this.player.load(),this.player.currentTime=0)},toggle(){var e;this.isPlaying?this.pause():this.play((e=this.currentAudio)==null?void 0:e.id)},async setPrev(){var e;this.pause(),this.currentAudio&&this.setCurrentAudio(this.playlist[this.indexCurrentAudio-1]),this.load(),this.play((e=this.currentAudio)==null?void 0:e.id)},async setNext(){var e;this.pause(),this.currentAudio&&(this.indexCurrentAudio===this.playlist.length-1?this.setCurrentAudio(this.playlist[0]):this.setCurrentAudio(this.playlist[this.indexCurrentAudio+1])),this.load(),this.play((e=this.currentAudio)==null?void 0:e.id)}}}),w=[{id:1,title:_.name.findName(),artistTitle:_.name.jobTitle(),cover:"/images/album-1.jpg",url:"/music/1.mp3",duration:4e3},{id:2,title:_.name.findName(),artistTitle:_.name.jobTitle(),cover:"/images/album-2.jpg",url:"/music/1.mp3",duration:4e3}];const j={class:"audio-player"},G=u("div",{class:"audio-player__title"},"Playing now",-1),B=["src","alt"],W={class:"audio-player__artist"},V={class:"audio-player__track"},Y={class:"audio-player__duration"},K={class:"start"},H={class:"end"},q=["value"],J={class:"audio-player__controls"},Q=["src","type"],X=P({setup(e){const t=U(),o=$(),a=$(0),i=N(()=>{var n,l;if((n=t.currentAudio)!=null&&n.url){const d=((l=t.currentAudio)==null?void 0:l.url.split("."))||[];switch(d[d.length-1].toUpperCase()){case"WAV":return"audio/wav";case"MP3":return"audio/mpeg";case"OGG":return"audio/ogg"}return"audio/mpeg"}return"audio/mpeg"}),s=()=>{o.value&&(a.value=Math.floor(o.value.currentTime/t.duration*100),t.progress=Math.floor(o.value.currentTime/t.duration*100))},c=n=>{var l;t.slideProgress(+((l=n.target)==null?void 0:l.value))};return F(()=>o.value,n=>{n&&!t.player&&(t.setPlayer(n),t.playlist=w,t.setCurrentAudio(t.playlist[0]))}),(n,l)=>{var d,A,b,x,M;return h(),f("div",j,[G,u("img",{class:"audio-player__album-cover",src:(d=r(t).currentAudio)==null?void 0:d.cover,alt:(A=r(t).currentAudio)==null?void 0:A.title,loading:"lazy"},null,8,B),u("div",W,p((b=r(t).currentAudio)==null?void 0:b.artistTitle),1),u("div",V,p((x=r(t).currentAudio)==null?void 0:x.title),1),u("div",Y,[u("div",K,p(r(t).getFormattedProgress),1),u("div",H,p(r(t).getFormattedDuration),1)]),u("input",{type:"range","aria-label":"\u041F\u0440\u043E\u0433\u0440\u0435\u0441\u0441 \u0430\u0443\u0434\u0438\u043E",value:a.value,min:"0",max:"100",class:"audio-player__progressbar",onInput:c},null,40,q),u("div",J,[g(v,{"is-circle":"",icon:r(y).BACKWARD,size:r(m).LARGE,onClick:r(t).setPrev},null,8,["icon","size","onClick"]),g(v,{"is-circle":"",icon:r(t).isPlaying?r(y).PAUSE:r(y).PLAY,type:r(C).PRIMARY,size:r(m).LARGE,onClick:r(t).toggle},null,8,["icon","type","size","onClick"]),g(v,{"is-circle":"",icon:r(y).FORWARD,size:r(m).LARGE,onClick:r(t).setNext},null,8,["icon","size","onClick"])]),u("audio",{ref_key:"player",ref:o,onTimeupdate:s,onEnded:l[0]||(l[0]=(...k)=>r(t).setNext&&r(t).setNext(...k))},[u("source",{src:(M=r(t).currentAudio)==null?void 0:M.url,type:r(i)},null,8,Q)],544)])}}});const Z={class:"container flex min-h-screen items-center justify-center"},ee=P({setup(e){return(t,o)=>(h(),f("div",Z,[g(X)]))}}),T=E(ee);T.use(z());T.mount("#app");
