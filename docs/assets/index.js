import{d as T,c as S,o as h,a as m,n as k,b as U,t as f,u as r,e as w,f as A,r as x,i as g,w as z,g as l,h as F,v as B,j as P,k as j,l as G}from"./vendor.js";const W=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function s(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=s(i);fetch(i.href,o)}};W();var _=(e=>(e.SMALL="small",e.MEDIUM="medium",e.LARGE="large",e))(_||{}),L=(e=>(e.PRIMARY="primary",e.DEFAULT="default",e))(L||{});const V={key:1},M=T({props:{isCircle:{type:Boolean,default:!1},size:{default:_.MEDIUM},icon:null,caption:{default:""},type:{default:L.DEFAULT}},setup(e){const t=e,s=S(()=>({"base-button_circle":t.isCircle}));return(n,i)=>(h(),m("button",{type:"button",class:k(["base-button",`base-button_${e.size}`,`base-button_${e.type}`,r(s)])},[e.icon?(h(),m("i",{key:0,class:k(e.icon)},null,2)):U("",!0),e.caption?(h(),m("span",V,f(e.caption),1)):U("",!0)],2))}});var y=(e=>(e.BACKWARD="fas fa-backward",e.PLAY="fas fa-play",e.PAUSE="fas fa-pause",e.FORWARD="fas fa-forward",e))(y||{});const K=w("audioPlayer",{state:()=>({player:void 0,playlist:[],currentAudio:void 0,progress:0,isPlaying:!1}),getters:{indexCurrentAudio:e=>e.currentAudio?e.playlist.indexOf(e.currentAudio):0,duration:e=>{var t;return Math.trunc(((t=e.player)==null?void 0:t.duration)||0)}},actions:{setPlayer(e){this.player=e},setCurrentAudio(e){this.currentAudio=e,this.load()},async play(e){var t,s,n;this.currentAudio||this.setCurrentAudio(this.playlist.find(i=>i.id===e)),e!==((t=this.currentAudio)==null?void 0:t.id)&&(this.isPlaying=!1,this.setCurrentAudio(this.playlist.find(i=>i.id===e))),(s=this.player)!=null&&s.paused&&((n=this.player)==null||n.play().catch(i=>console.log(i))),this.isPlaying=!0},pause(){var e;(e=this.player)==null||e.pause(),this.isPlaying=!1},load(){this.player&&(this.player.load(),this.player.currentTime=0)},toggle(){var e;this.isPlaying?this.pause():this.play((e=this.currentAudio)==null?void 0:e.id)},async setPrev(){var e;this.pause(),this.currentAudio&&this.setCurrentAudio(this.playlist[this.indexCurrentAudio-1]),this.load(),this.play((e=this.currentAudio)==null?void 0:e.id)},async setNext(){var e;this.pause(),this.currentAudio&&(this.indexCurrentAudio===this.playlist.length-1?this.setCurrentAudio(this.playlist[0]):this.setCurrentAudio(this.playlist[this.indexCurrentAudio+1])),this.load(),this.play((e=this.currentAudio)==null?void 0:e.id)}}}),Y=[{id:1,title:A.name.findName(),artistTitle:A.name.jobTitle(),cover:"images/album-1.jpg",url:"music/1.mp3",duration:4e3},{id:2,title:A.name.findName(),artistTitle:A.name.jobTitle(),cover:"images/album-2.jpg",url:"music/2.mp3",duration:4e3}];var O=e=>{const n=Math.floor(e/3600),i=Math.floor((e-n*3600)/60),o=e-n*3600-i*60;let c="";const v=o<10?`0${o}`:`${o}`;if(!n)c=`${i}:${v}`;else{const C=i<10?`0${i}`:`${i}`;c=`${n}:${C}:${v}`}return c};const N="--:--";const H={class:"audio-player"},q=l("div",{class:"audio-player__title"},"Playing now",-1),J=["src","alt"],Q={class:"audio-player__artist"},X={class:"audio-player__track"},Z={class:"audio-player__duration"},ee={class:"start"},te={class:"end"},ie={class:"audio-player__controls"},se=["src","type"],re=T({setup(e){const t=K(),s=x(),n=x(0),i=x(N),o=S(()=>{var u,a;if((u=t.currentAudio)!=null&&u.url){const d=((a=t.currentAudio)==null?void 0:a.url.split("."))||[];switch(d[d.length-1].toUpperCase()){case"WAV":return"audio/wav";case"MP3":return"audio/mpeg";case"OGG":return"audio/ogg"}return"audio/mpeg"}return"audio/mpeg"}),c=()=>{var u,a;i.value=((u=s.value)==null?void 0:u.duration)&&g((a=s.value)==null?void 0:a.duration)?O(Math.floor(s.value.duration)):N},v=()=>{s.value&&g(s.value.duration)&&(n.value=Math.floor(s.value.currentTime/s.value.duration*100),t.progress=Math.floor(s.value.currentTime/s.value.duration*100))},C=u=>{if(c(),s.value){const a=Math.floor(s.value.duration*+u.target.value/100);s.value.currentTime=a,t.progress=a}},E=S(()=>{var u,a,d,p;return console.log({audio:t.currentAudio,dur:(u=s.value)==null?void 0:u.duration,durBool:!!((a=s.value)!=null&&a.duration),durIsNum:g((d=s.value)==null?void 0:d.duration),progress:t.progress}),t.currentAudio&&g((p=s.value)==null?void 0:p.duration)?O(Math.floor(+t.progress)):N});return z(()=>s.value,u=>{u&&!t.player&&(t.setPlayer(u),t.playlist=Y,t.setCurrentAudio(t.playlist[0]),t.load())}),(u,a)=>{var d,p,R,$,D;return h(),m("div",H,[q,l("img",{class:"audio-player__album-cover",src:(d=r(t).currentAudio)==null?void 0:d.cover,alt:(p=r(t).currentAudio)==null?void 0:p.title,loading:"lazy"},null,8,J),l("div",Q,f((R=r(t).currentAudio)==null?void 0:R.artistTitle),1),l("div",X,f(($=r(t).currentAudio)==null?void 0:$.title),1),l("div",Z,[l("div",ee,f(r(E)),1),l("div",te,f(i.value),1)]),F(l("input",{type:"range","aria-label":"\u041F\u0440\u043E\u0433\u0440\u0435\u0441\u0441 \u0430\u0443\u0434\u0438\u043E","onUpdate:modelValue":a[0]||(a[0]=b=>n.value=b),min:"0",max:"100",class:"audio-player__progressbar",onInput:C},null,544),[[B,n.value]]),l("div",ie,[P(M,{"is-circle":"",icon:r(y).BACKWARD,size:r(_).LARGE,onClick:r(t).setPrev},null,8,["icon","size","onClick"]),P(M,{"is-circle":"",icon:r(t).isPlaying?r(y).PAUSE:r(y).PLAY,type:r(L).PRIMARY,size:r(_).LARGE,onClick:r(t).toggle},null,8,["icon","type","size","onClick"]),P(M,{"is-circle":"",icon:r(y).FORWARD,size:r(_).LARGE,onClick:r(t).setNext},null,8,["icon","size","onClick"])]),l("audio",{ref_key:"player",ref:s,onOnloadedmetadata:c,onTimeupdate:v,onEnded:a[1]||(a[1]=(...b)=>r(t).setNext&&r(t).setNext(...b))},[l("source",{src:(D=r(t).currentAudio)==null?void 0:D.url,type:r(o)},null,8,se)],544)])}}});const oe={class:"container flex min-h-screen items-center justify-center"},ae=T({setup(e){return(t,s)=>(h(),m("div",oe,[P(re)]))}}),I=j(ae);I.use(G());I.mount("#app");
